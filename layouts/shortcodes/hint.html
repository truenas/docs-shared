{{- /* Support named parameters (preferred) and positional (legacy) */ -}}
{{- $type := .Get "type" | default (.Get 0) | default "note" -}}
{{- $title := .Get "title" | default "" -}}
{{- $content := .Inner -}}

{{- $type = upper $type | printf "[!%s]" -}}

{{- $markdown := printf "> %s" $type -}}
{{- if $title -}}
  {{- $markdown = printf "> %s %s" $type $title -}}
{{- end -}}

{{- /* Add each line of content as a blockquote line, preserving blank lines */ -}}
{{- range split $content "\n" -}}
  {{- if eq (strings.TrimSpace .) "" -}}
    {{- $markdown = printf "%s\n>" $markdown -}}
  {{- else -}}
    {{- $markdown = printf "%s\n> %s" $markdown . -}}
  {{- end -}}
{{- end -}}

{{ .Page.RenderString $markdown }}
